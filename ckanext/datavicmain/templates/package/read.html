{% ckan_extends %}

{# Note: The parent template has aliased c.pkg_dict as pkg #}

{% block package_description %}
  {{ super() }}

  {% for field_id, field_attributes in h.dataset_extra_fields %}
    {% if pkg.get(field_id) %}
      <section id="dataset-{{ field_id }}" class="resources module-content">
        <p><strong>{{ _( field_attributes['label'] ) }}</strong>: {{ pkg.get(field_id) }}</p>
      </section>
    {% endif %}
  {% endfor %}

{% endblock %}

{% block package_resources %}
  {% set historical_resources_list = h.historical_resources_list(pkg.resources) %}
  {% if historical_resources_list[1] and historical_resources_list[1]['period_start'] != None  and historical_resources_list[1]['period_start'] != "" %}
      {% snippet "package/snippets/resources_list.html", pkg=pkg, resources=[historical_resources_list[0]] %}
  {% else %}
      {% snippet "package/snippets/resources_list.html", pkg=pkg, resources=pkg.resources %}
  {% endif %}
{% endblock %}
